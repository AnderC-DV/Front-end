{"openapi":"3.1.0","info":{"title":"AuraTech API","version":"0.1.0"},"paths":{"/api/v1/auth/login/check-identifier":{"post":{"tags":["Authentication"],"summary":"Check User Identifier","description":"Endpoint para el primer paso del login.\nVerifica un identificador y devuelve el estado del usuario.","operationId":"check_user_identifier_api_v1_auth_login_check_identifier_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginIdentifierRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CheckIdentifierResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login/first-time":{"post":{"tags":["Authentication"],"summary":"Create Password First Login","description":"Endpoint para que un usuario nuevo autorizado cree su contraseña.","operationId":"create_password_first_login_api_v1_auth_login_first_time_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/FirstLoginCreatePasswordRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/auth/login/token":{"post":{"tags":["Authentication"],"summary":"Login For Access Token","description":"Endpoint para el login de usuarios ya existentes.\nCompatible con el flujo 'password' de OAuth2 para Swagger UI.","operationId":"login_for_access_token_api_v1_auth_login_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_api_v1_auth_login_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/":{"post":{"tags":["Templates"],"summary":"Crear una nueva plantilla de mensaje","description":"Crea una nueva plantilla y la envía a aprobación. Requiere rol de Coordinador o Admin.","operationId":"create_template_api_v1_templates__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Template"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Templates"],"summary":"Listar todas las plantillas del sistema","description":"Obtiene una lista paginada de todas las plantillas del sistema,\nmostrando su estado actual (Aprobada, Denegada, Pendiente, etc.).","operationId":"get_all_templates_api_v1_templates__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Número de registros a saltar para paginación.","default":0,"title":"Skip"},"description":"Número de registros a saltar para paginación."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Número máximo de registros a devolver.","default":100,"title":"Limit"},"description":"Número máximo de registros a devolver."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Template"},"title":"Response Get All Templates Api V1 Templates  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/variables":{"get":{"tags":["Templates"],"summary":"Obtener variables disponibles","description":"Devuelve una lista de todas las variables del 'master' que se pueden usar en las plantillas.","operationId":"get_template_variables_api_v1_templates_variables_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TemplateVariable"},"type":"array","title":"Response Get Template Variables Api V1 Templates Variables Get"}}}}}}},"/api/v1/templates/pending-review":{"get":{"tags":["Templates"],"summary":"Listar plantillas pendientes de revisión","description":"Obtiene una lista de todas las plantillas que tienen el estado\n'PENDING_APPROVAL', para ser revisadas por el equipo Jurídico.","operationId":"get_pending_templates_api_v1_templates_pending_review_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/Template"},"type":"array","title":"Response Get Pending Templates Api V1 Templates Pending Review Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/templates/{template_id}/review":{"post":{"tags":["Templates"],"summary":"Aprobar o rechazar una plantilla","description":"Permite a un usuario con rol 'Jurídico' o 'Admin' aprobar o rechazar\nuna plantilla pendiente.\n- `approve`: `true` para aprobar, `false` para rechazar.\n- `rejection_reason`: Obligatorio si se rechaza la plantilla.","operationId":"review_template_api_v1_templates__template_id__review_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"ID de la plantilla a revisar","title":"Template Id"},"description":"ID de la plantilla a revisar"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplateReviewRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Template"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/{template_id}/preview":{"get":{"tags":["Templates"],"summary":"Obtener vista previa de una plantilla","description":"Genera una vista previa de la plantilla, reemplazando las variables tanto en el asunto como en el contenido.","operationId":"get_template_preview_api_v1_templates__template_id__preview_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"ID de la plantilla para previsualizar","title":"Template Id"},"description":"ID de la plantilla para previsualizar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/TemplatePreview"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/templates/{template_id}":{"get":{"tags":["Templates"],"summary":"Obtener una plantilla por su ID","description":"Recupera los detalles completos de una plantilla específica por su ID.\n\nEste endpoint es utilizado por el frontend para:\n1. Ver los detalles de una plantilla.\n2. Poblar el formulario de creación al \"Duplicar\" una plantilla existente.","operationId":"get_template_by_id_api_v1_templates__template_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"template_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"ID de la plantilla a obtener","title":"Template Id"},"description":"ID de la plantilla a obtener"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Template"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/":{"get":{"tags":["Notifications"],"summary":"Obtener notificaciones del usuario","description":"Obtiene una lista paginada de las notificaciones del usuario actual.","operationId":"get_my_notifications_api_v1_notifications__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":100,"minimum":1,"default":20,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Notification"},"title":"Response Get My Notifications Api V1 Notifications  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/notifications/unread-count":{"get":{"tags":["Notifications"],"summary":"Obtener conteo de notificaciones no leídas","description":"Devuelve el número de notificaciones no leídas para el usuario actual.","operationId":"get_my_unread_notifications_count_api_v1_notifications_unread_count_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/UnreadNotificationsCount"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/notifications/{notification_id}/read":{"patch":{"tags":["Notifications"],"summary":"Marcar una notificación como leída","description":"Marca una notificación específica como leída.","operationId":"mark_notification_as_read_api_v1_notifications__notification_id__read_patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"notification_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","description":"ID de la notificación a marcar","title":"Notification Id"},"description":"ID de la notificación a marcar"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Notification"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/audience/filters":{"get":{"tags":["Audience & Segmentation"],"summary":"Obtener todos los filtros de audiencia guardados","operationId":"get_saved_filters_api_v1_audience_filters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AudienceFilter"},"type":"array","title":"Response Get Saved Filters Api V1 Audience Filters Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["Audience & Segmentation"],"summary":"Crear y guardar un nuevo filtro de audiencia","operationId":"create_audience_filter_api_v1_audience_filters_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilterCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceFilter"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/count":{"post":{"tags":["Audience & Segmentation"],"summary":"Calcular el tamaño de la audiencia en tiempo real","description":"Recibe un conjunto de reglas y devuelve cuántos clientes coinciden.\nEl sistema validará que todos los `field_name` sean campos válidos.","operationId":"get_audience_count_api_v1_audience_count_post","requestBody":{"content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/AudienceFilterRuleCreate"},"type":"array","title":"Rules"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/AudienceCountResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/audience/available-filters":{"get":{"tags":["Audience & Segmentation"],"summary":"Obtener los campos de filtrado disponibles","description":"Devuelve una lista dinámica de todos los campos por los que se puede\nfiltrar una audiencia, extraídos directamente de los modelos de datos\nMasterClient y MasterObligation.","operationId":"get_available_filter_fields_api_v1_audience_available_filters_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/TemplateVariable"},"type":"array","title":"Response Get Available Filter Fields Api V1 Audience Available Filters Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/v1/campaigns/preview":{"post":{"tags":["Campaigns (One-Time)"],"summary":"Get a preview of campaign recipients","description":"Provides a preview of the recipients that a campaign will target based on its configuration.\n\nThis endpoint **does not** create or save the campaign. It's a dry run to verify the audience.","operationId":"preview_campaign_recipients_api_v1_campaigns_preview_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Registros a saltar para paginación.","default":0,"title":"Skip"},"description":"Registros a saltar para paginación."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":500,"minimum":1,"description":"Máximo de registros a devolver en la previsualización.","default":100,"title":"Limit"},"description":"Máximo de registros a devolver en la previsualización."}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignCreate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/PreviewRecipient"},"title":"Response Preview Campaign Recipients Api V1 Campaigns Preview Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/campaigns/":{"post":{"tags":["Campaigns (One-Time)"],"summary":"Create and launch a new campaign","description":"Creates, validates, and enqueues a new campaign in a single step.\n\n- If `scheduled_at` is provided, the campaign is scheduled for that time.\n- If `scheduled_at` is null, the campaign is enqueued for immediate execution.","operationId":"create_and_launch_campaign_api_v1_campaigns__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Campaign"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Campaigns (One-Time)"],"summary":"List all campaigns","description":"Retrieves a paginated list of all campaigns, with optional filters.","operationId":"get_all_campaigns_api_v1_campaigns__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Records to skip for pagination.","default":0,"title":"Skip"},"description":"Records to skip for pagination."},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"description":"Maximum records to return.","default":100,"title":"Limit"},"description":"Maximum records to return."},{"name":"status","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/CampaignStatus"},{"type":"null"}],"description":"Filter by campaign status.","title":"Status"},"description":"Filter by campaign status."},{"name":"channel_type","in":"query","required":false,"schema":{"anyOf":[{"$ref":"#/components/schemas/ChannelType"},{"type":"null"}],"description":"Filter by communication channel.","title":"Channel Type"},"description":"Filter by communication channel."}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Campaign"},"title":"Response Get All Campaigns Api V1 Campaigns  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/":{"post":{"tags":["Campaigns (Recurrent)"],"summary":"Crear una nueva campaña recurrente (Schedule)","description":"Crea una regla para una campaña recurrente.\nEl sistema de Celery Beat leerá estas reglas para lanzar las campañas\nautomáticamente según la `cron_expression`.","operationId":"create_schedule_api_v1_schedules__post","security":[{"OAuth2PasswordBearer":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignScheduleCreate"}}}},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignSchedule"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"get":{"tags":["Campaigns (Recurrent)"],"summary":"Listar todas las campañas recurrentes","description":"Obtiene una lista de todas las reglas de campañas recurrentes configuradas.","operationId":"get_all_schedules_api_v1_schedules__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/CampaignSchedule"},"title":"Response Get All Schedules Api V1 Schedules  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/{schedule_id}":{"patch":{"tags":["Campaigns (Recurrent)"],"summary":"Actualizar una campaña recurrente","description":"Actualiza los detalles de un schedule. Permite cambiar el nombre,\nla expresión CRON, la plantilla, la audiencia o desactivarlo.","operationId":"update_schedule_api_v1_schedules__schedule_id__patch","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Schedule Id"}}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignScheduleUpdate"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/CampaignSchedule"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}},"delete":{"tags":["Campaigns (Recurrent)"],"summary":"Eliminar una campaña recurrente","description":"Elimina permanentemente una regla de campaña recurrente.","operationId":"delete_schedule_api_v1_schedules__schedule_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Schedule Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/schedules/{schedule_id}/campaigns":{"get":{"tags":["Campaigns (Recurrent)"],"summary":"Listar campañas generadas por un schedule","description":"Obtiene una lista de todas las campañas que han sido generadas por un schedule recurrente.","operationId":"get_schedule_campaigns_api_v1_schedules__schedule_id__campaigns_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"schedule_id","in":"path","required":true,"schema":{"type":"string","format":"uuid","title":"Schedule Id"}},{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"default":0,"title":"Skip"}},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":200,"minimum":1,"default":100,"title":"Limit"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Campaign"},"title":"Response Get Schedule Campaigns Api V1 Schedules  Schedule Id  Campaigns Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/utils/update-employee":{"post":{"tags":["Utilities"],"summary":"Update Master Employee","description":"Updates a master employee record.","operationId":"update_master_employee_api_v1_utils_update_employee_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MasterEmployeeUpdate"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"title":"Response Update Master Employee Api V1 Utils Update Employee Post"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/v1/utils/employees/{cedula}":{"delete":{"tags":["Utilities"],"summary":"Delete Master Employee","description":"Deletes (soft delete) a master employee record by cedula.","operationId":"delete_master_employee_api_v1_utils_employees__cedula__delete","parameters":[{"name":"cedula","in":"path","required":true,"schema":{"type":"string","title":"Cedula"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"AudienceCountResponse":{"properties":{"match_count":{"type":"integer","title":"Match Count"}},"type":"object","required":["match_count"],"title":"AudienceCountResponse","description":"Respuesta para el contador de audiencia en tiempo real."},"AudienceFilter":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"id":{"type":"string","format":"uuid","title":"Id"},"rules":{"items":{"$ref":"#/components/schemas/AudienceFilterRule"},"type":"array","title":"Rules","default":[]}},"type":"object","required":["name","id"],"title":"AudienceFilter"},"AudienceFilterCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"rules":{"items":{"$ref":"#/components/schemas/AudienceFilterRuleCreate"},"type":"array","title":"Rules"}},"type":"object","required":["name","rules"],"title":"AudienceFilterCreate"},"AudienceFilterRule":{"properties":{"field_name":{"type":"string","title":"Field Name","description":"Nombre de la columna en la tabla master_clients."},"operator":{"type":"string","title":"Operator","description":"Operador de comparación. Válidos: GTE, CONTAINS, IN, LT, NOT_IN, NEQ, GT, EQ, LTE"},"value":{"type":"string","title":"Value","description":"Valor para la comparación. Para 'IN'/'NOT_IN', usar comas: 'val1,val2'."},"id":{"type":"integer","title":"Id"}},"type":"object","required":["field_name","operator","value","id"],"title":"AudienceFilterRule"},"AudienceFilterRuleCreate":{"properties":{"field_name":{"type":"string","title":"Field Name","description":"Nombre de la columna en la tabla master_clients."},"operator":{"type":"string","title":"Operator","description":"Operador de comparación. Válidos: GTE, CONTAINS, IN, LT, NOT_IN, NEQ, GT, EQ, LTE"},"value":{"type":"string","title":"Value","description":"Valor para la comparación. Para 'IN'/'NOT_IN', usar comas: 'val1,val2'."}},"type":"object","required":["field_name","operator","value"],"title":"AudienceFilterRuleCreate"},"Body_login_for_access_token_api_v1_auth_login_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","format":"password","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"format":"password","title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_for_access_token_api_v1_auth_login_token_post"},"Campaign":{"properties":{"name":{"type":"string","maxLength":150,"minLength":5,"title":"Name","description":"Nombre descriptivo de la campaña."},"channel_type":{"$ref":"#/components/schemas/ChannelType","description":"Canal de comunicación para la campaña."},"id":{"type":"string","format":"uuid","title":"Id"},"status":{"$ref":"#/components/schemas/CampaignStatus"},"creator":{"$ref":"#/components/schemas/User"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"message_template_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Message Template Id"},"audience_filter_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Audience Filter Id"},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At"},"target_role":{"anyOf":[{"$ref":"#/components/schemas/TargetRole"},{"type":"null"}]},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}]}},"type":"object","required":["name","channel_type","id","status","creator","created_at","updated_at"],"title":"Campaign","description":"Esquema completo para devolver una campaña desde la API.\nIncluye todos los campos, relaciones y metadatos."},"CampaignCreate":{"properties":{"name":{"type":"string","maxLength":150,"minLength":5,"title":"Name","description":"Nombre descriptivo de la campaña."},"channel_type":{"$ref":"#/components/schemas/ChannelType","description":"Canal de comunicación para la campaña."},"message_template_id":{"type":"string","format":"uuid","title":"Message Template Id","description":"ID de la plantilla APROBADA a usar."},"audience_filter_id":{"type":"string","format":"uuid","title":"Audience Filter Id","description":"ID del filtro de audiencia que define el público."},"target_role":{"$ref":"#/components/schemas/TargetRole","description":"Define el rol del público objetivo de la campaña (DEUDOR o CODEUDOR)."},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}],"description":"Estrategia de envío si el objetivo son los codeudores. Requerido si target_role es CODEUDOR."},"scheduled_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Scheduled At","description":"Para envíos únicos programados. Si es NULO, se asume envío inmediato."},"source_schedule_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Source Schedule Id","description":"ID del schedule recurrente que origina esta campaña."}},"type":"object","required":["name","channel_type","message_template_id","audience_filter_id","target_role"],"title":"CampaignCreate","description":"Esquema para crear una nueva campaña con todos los datos necesarios,\nincluyendo la selección del público objetivo y la programación."},"CampaignSchedule":{"properties":{"name":{"type":"string","maxLength":150,"minLength":5,"title":"Name","description":"Nombre descriptivo del schedule."},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Descripción opcional."},"cron_expression":{"type":"string","title":"Cron Expression","description":"Expresión CRON válida. Ej: '0 9 * * 1' (Lunes a las 9:00 AM)."},"is_active":{"type":"boolean","title":"Is Active","description":"Indica si el schedule está activo.","default":true},"start_date":{"type":"string","format":"date-time","title":"Start Date","description":"Fecha de inicio de la recurrencia."},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date","description":"Fecha de fin de la recurrencia. Nulo para indefinido."},"channel_type":{"$ref":"#/components/schemas/ChannelType"},"message_template_id":{"type":"string","format":"uuid","title":"Message Template Id"},"audience_filter_id":{"type":"string","format":"uuid","title":"Audience Filter Id"},"target_role":{"$ref":"#/components/schemas/TargetRole"},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}]},"id":{"type":"string","format":"uuid","title":"Id"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"last_run_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Run At"},"next_run_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Next Run At"},"created_by_user_id":{"type":"string","format":"uuid","title":"Created By User Id"}},"type":"object","required":["name","cron_expression","channel_type","message_template_id","audience_filter_id","target_role","id","created_at","updated_at","created_by_user_id"],"title":"CampaignSchedule","description":"Esquema completo para devolver un schedule desde la API."},"CampaignScheduleCreate":{"properties":{"name":{"type":"string","maxLength":150,"minLength":5,"title":"Name","description":"Nombre descriptivo del schedule."},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description","description":"Descripción opcional."},"cron_expression":{"type":"string","title":"Cron Expression","description":"Expresión CRON válida. Ej: '0 9 * * 1' (Lunes a las 9:00 AM)."},"is_active":{"type":"boolean","title":"Is Active","description":"Indica si el schedule está activo.","default":true},"start_date":{"type":"string","format":"date-time","title":"Start Date","description":"Fecha de inicio de la recurrencia."},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date","description":"Fecha de fin de la recurrencia. Nulo para indefinido."},"channel_type":{"$ref":"#/components/schemas/ChannelType"},"message_template_id":{"type":"string","format":"uuid","title":"Message Template Id"},"audience_filter_id":{"type":"string","format":"uuid","title":"Audience Filter Id"},"target_role":{"$ref":"#/components/schemas/TargetRole"},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}]}},"type":"object","required":["name","cron_expression","channel_type","message_template_id","audience_filter_id","target_role"],"title":"CampaignScheduleCreate"},"CampaignScheduleUpdate":{"properties":{"name":{"anyOf":[{"type":"string","maxLength":150,"minLength":5},{"type":"null"}],"title":"Name"},"description":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Description"},"cron_expression":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Cron Expression"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active"},"start_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Start Date"},"end_date":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"End Date"},"message_template_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Message Template Id"},"audience_filter_id":{"anyOf":[{"type":"string","format":"uuid"},{"type":"null"}],"title":"Audience Filter Id"},"target_role":{"anyOf":[{"$ref":"#/components/schemas/TargetRole"},{"type":"null"}]},"codebtor_strategy":{"anyOf":[{"$ref":"#/components/schemas/CoDebtorStrategy"},{"type":"null"}]}},"type":"object","title":"CampaignScheduleUpdate","description":"Esquema para actualizar un schedule. Todos los campos son opcionales."},"CampaignStatus":{"type":"string","enum":["DRAFT","PENDING_APPROVAL","SCHEDULED","SENDING","COMPLETED","ERROR","CANCELED"],"title":"CampaignStatus"},"ChannelType":{"type":"string","enum":["SMS","WHATSAPP","EMAIL"],"title":"ChannelType"},"CheckIdentifierResponse":{"properties":{"status":{"type":"string","title":"Status"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"}},"type":"object","required":["status"],"title":"CheckIdentifierResponse","description":"Respuesta para el endpoint de verificación."},"CoDebtorStrategy":{"type":"string","enum":["FIRST","ALL"],"title":"CoDebtorStrategy"},"FirstLoginCreatePasswordRequest":{"properties":{"identifier":{"type":"string","title":"Identifier"},"password":{"type":"string","minLength":8,"title":"Password"}},"type":"object","required":["identifier","password"],"title":"FirstLoginCreatePasswordRequest","description":"Esquema para crear la contraseña en el primer login."},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"LoginIdentifierRequest":{"properties":{"identifier":{"type":"string","title":"Identifier"}},"type":"object","required":["identifier"],"title":"LoginIdentifierRequest","description":"Esquema para el primer paso del login: identificar al usuario."},"MasterEmployeeUpdate":{"properties":{"cedula":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Cedula"},"nombre":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Nombre"},"area":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Area"},"cargo":{"type":"string","maxLength":100,"title":"Cargo"},"jefe_inmediato":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Jefe Inmediato"},"contrato":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Contrato"},"top":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Top"},"temporal":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Temporal"},"estado":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Estado"},"ciudad":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Ciudad"},"usuario_red":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Usuario Red"},"adminfo":{"anyOf":[{"type":"string","maxLength":50},{"type":"null"}],"title":"Adminfo"},"extension_3cx":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Extension 3Cx"},"cola_3cx":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Cola 3Cx"},"asignacion":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Asignacion"},"fecha_ingreso":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Fecha Ingreso"},"fecha_nacimiento":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Fecha Nacimiento"},"fecha_productividad":{"anyOf":[{"type":"string","format":"date"},{"type":"null"}],"title":"Fecha Productividad"},"genero":{"anyOf":[{"type":"string","maxLength":1},{"type":"null"}],"title":"Genero"},"lugar":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Lugar"},"direccion":{"anyOf":[{"type":"string","maxLength":500},{"type":"null"}],"title":"Direccion"},"eps":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Eps"},"pensiones":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Pensiones"},"arl":{"anyOf":[{"type":"string","maxLength":100},{"type":"null"}],"title":"Arl"},"celular":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Celular"},"correo_renovar":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Correo Renovar"},"correo_personal":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Correo Personal"},"contacto_emergencia":{"anyOf":[{"type":"string","maxLength":255},{"type":"null"}],"title":"Contacto Emergencia"},"telefono_emergencia":{"anyOf":[{"type":"string","maxLength":20},{"type":"null"}],"title":"Telefono Emergencia"},"hijos_cantidad":{"anyOf":[{"type":"integer"},{"type":"null"}],"title":"Hijos Cantidad"}},"type":"object","required":["cargo"],"title":"MasterEmployeeUpdate"},"Notification":{"properties":{"message":{"type":"string","title":"Message"},"link_url":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link Url"},"id":{"type":"string","format":"uuid","title":"Id"},"is_read":{"type":"boolean","title":"Is Read"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"type":{"$ref":"#/components/schemas/NotificationType"}},"type":"object","required":["message","id","is_read","created_at","type"],"title":"Notification","description":"Esquema para devolver una notificación desde la API."},"NotificationType":{"type":"string","enum":["TEMPLATE_APPROVED","TEMPLATE_REJECTED","CAMPAIGN_SCHEDULED","CAMPAIGN_SENDING","CAMPAIGN_COMPLETED","CAMPAIGN_ERROR","GENERIC_INFO"],"title":"NotificationType"},"PreviewRecipient":{"properties":{"nombre_completo":{"type":"string","title":"Nombre Completo"},"contact_info":{"type":"string","title":"Contact Info"},"cedula":{"type":"string","title":"Cedula"}},"type":"object","required":["nombre_completo","contact_info","cedula"],"title":"PreviewRecipient","description":"Esquema para devolver un destinatario en la vista previa de la campaña."},"TargetRole":{"type":"string","enum":["DEUDOR","CODEUDOR"],"title":"TargetRole"},"Template":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name","description":"Nombre descriptivo de la plantilla."},"content":{"type":"string","minLength":10,"title":"Content","description":"Contenido del mensaje, puede incluir variables como {nombre_cliente}."},"channel_type":{"$ref":"#/components/schemas/ChannelType","description":"Canal al que pertenece la plantilla (SMS, WHATSAPP, EMAIL)."},"subject":{"anyOf":[{"type":"string","maxLength":255,"minLength":5},{"type":"null"}],"title":"Subject","description":"Asunto del correo (solo para plantillas EMAIL)."},"id":{"type":"string","format":"uuid","title":"Id"},"status":{"$ref":"#/components/schemas/TemplateStatus"},"creator":{"$ref":"#/components/schemas/User"},"created_at":{"type":"string","format":"date-time","title":"Created At"},"updated_at":{"type":"string","format":"date-time","title":"Updated At"},"rejection_reason":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Rejection Reason"},"reviewed_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Reviewed At"}},"type":"object","required":["name","content","channel_type","id","status","creator","created_at","updated_at"],"title":"Template","description":"Esquema completo para devolver una plantilla desde la API.\nIncluye campos generados por la base de datos y relaciones."},"TemplateCreate":{"properties":{"name":{"type":"string","maxLength":100,"minLength":3,"title":"Name","description":"Nombre descriptivo de la plantilla."},"content":{"type":"string","minLength":10,"title":"Content","description":"Contenido del mensaje, puede incluir variables como {nombre_cliente}."},"channel_type":{"$ref":"#/components/schemas/ChannelType","description":"Canal al que pertenece la plantilla (SMS, WHATSAPP, EMAIL)."},"subject":{"anyOf":[{"type":"string","maxLength":255,"minLength":5},{"type":"null"}],"title":"Subject","description":"Asunto del correo (solo para plantillas EMAIL)."}},"type":"object","required":["name","content","channel_type"],"title":"TemplateCreate","description":"Esquema para la creación de una nueva plantilla."},"TemplatePreview":{"properties":{"original_content":{"type":"string","title":"Original Content"},"preview_content":{"type":"string","title":"Preview Content"},"original_subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Original Subject"},"preview_subject":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Preview Subject"}},"type":"object","required":["original_content","preview_content"],"title":"TemplatePreview","description":"Esquema para la respuesta de la previsualización de la plantilla."},"TemplateReviewRequest":{"properties":{"approve":{"type":"boolean","title":"Approve","description":"True para aprobar, False para rechazar."},"rejection_reason":{"anyOf":[{"type":"string","maxLength":500,"minLength":10},{"type":"null"}],"title":"Rejection Reason","description":"Motivo del rechazo. Obligatorio si 'approve' es False."}},"type":"object","required":["approve"],"title":"TemplateReviewRequest","description":"Esquema para la petición de revisión de una plantilla.\nEl miembro de Jurídica debe indicar si aprueba o rechaza."},"TemplateStatus":{"type":"string","enum":["DRAFT","PENDING_APPROVAL","APPROVED","REJECTED"],"title":"TemplateStatus"},"TemplateVariable":{"properties":{"variable_name":{"type":"string","title":"Variable Name","description":"Nombre de la variable, ej: {nombre_completo}"},"description":{"type":"string","title":"Description","description":"Descripción de lo que representa la variable."}},"type":"object","required":["variable_name","description"],"title":"TemplateVariable","description":"Representa una variable disponible para usar en las plantillas."},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"Token"},"UnreadNotificationsCount":{"properties":{"count":{"type":"integer","title":"Count"}},"type":"object","required":["count"],"title":"UnreadNotificationsCount","description":"Esquema para devolver el conteo de notificaciones no leídas."},"User":{"properties":{"email":{"type":"string","format":"email","title":"Email"},"full_name":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Full Name"},"adminfo_code":{"type":"string","title":"Adminfo Code"},"is_active":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Is Active","default":true},"id":{"type":"string","format":"uuid","title":"Id"},"last_login_at":{"anyOf":[{"type":"string","format":"date-time"},{"type":"null"}],"title":"Last Login At"},"created_at":{"type":"string","format":"date-time","title":"Created At"}},"type":"object","required":["email","adminfo_code","id","created_at"],"title":"User"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"/api/v1/auth/login/token"}}}}}}